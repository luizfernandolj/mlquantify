
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="1.1. Aggregative Quantification" />
<meta property="og:type" content="website" />
<meta property="og:url" content="modules/aggregative.html" />
<meta property="og:site_name" content="mlquantify" />
<meta property="og:description" content="Aggregative quantifiers are a class of quantification methods that aggregates the results of a mid task, such as classification, i.e., the quantifier uses the predicted values (labels or scores) of..." />
<meta property="og:image:width" content="1146" />
<meta property="og:image:height" content="600" />
<meta property="og:image" content="/_images/social_previews/summary_modules_aggregative_a36407cb.png" />
<meta property="og:image:alt" content="Aggregative quantifiers are a class of quantification methods that aggregates the results of a mid task, such as classification, i.e., the quantifier uses th..." />
<meta name="description" content="Aggregative quantifiers are a class of quantification methods that aggregates the results of a mid task, such as classification, i.e., the quantifier uses the predicted values (labels or scores) of..." />
<meta name="twitter:card" content="summary_large_image" />

    <title>1.1. Aggregative Quantification &#8212; mlquantify 0.1.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=94d3f708" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=a58bc63e"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script data-domain="scikit-learn.org" defer="defer" src="https://views.scientific-python.org/js/script.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'modules/aggregative';</script>
    <link rel="canonical" href="https://luizfernandolj.github.io/mlquantify/modules/aggregative.html" />
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.2. Non Aggregative Quantification" href="non_aggregative.html" />
    <link rel="prev" title="1. Methods Taxonomy" href="../methods_taxonomy.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">mlquantify 0.1.1 documentation</p>
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../install.html">
    Install
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../user_guide.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/luizfernandolj/mlquantify/tree/master" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../install.html">
    Install
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../user_guide.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/luizfernandolj/mlquantify/tree/master" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../methods_taxonomy.html">1.  Methods Taxonomy</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">1.1. Aggregative Quantification</a></li>
<li class="toctree-l2"><a class="reference internal" href="non_aggregative.html">1.2. Non Aggregative Quantification</a></li>
<li class="toctree-l2"><a class="reference internal" href="meta.html">1.3. Meta Quantification</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../label_scheme.html">2.  Label Scheme</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../binary_problems.html">2.1. Binary problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiclass_problems.html">2.2. Multiclass Problems</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../building_a_quantifier.html">3.  Building a Quantifier</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="quantifier.html">3.1. Building a Quantifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregative_quantifier.html">3.2. Building an Aggregative Quantifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="non_aggregative_quantifier.html">3.3. Building a Non-Aggregative Quantifier</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../non_parameters_scenarios.html">4.  Non Parameters Scenarios</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../model_selection_evaluation.html">5.  Model Selection and Evaluation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="model_selection.html">5.1. Tunning the hyper-parameter of a quantifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html">5.2. Metrics and scoring: quantifing the performance of a quantifier</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../experiment_management.html">6.  Experiment Management</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="protocol.html">6.1. Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="app_general.html">6.2. Artificial Prevalence protocol with general usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="app_selected.html">6.3. Artificial Prevalence protocol with selected usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building_a_protocol.html">6.4. Building a Protocol</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../user_guide.html" class="nav-link">User Guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="../methods_taxonomy.html" class="nav-link"><span class="section-number">1. </span>Methods Taxonomy</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis"><span class="section-number">1.1. </span>Aggregative Quantification</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="aggregative-quantification">
<span id="aggregative"></span><h1><span class="section-number">1.1. </span>Aggregative Quantification<a class="headerlink" href="#aggregative-quantification" title="Link to this heading">#</a></h1>
<p>Aggregative quantifiers are a class of quantification methods that aggregates the results of a mid task, such as classification, i.e., the quantifier uses the predicted values (labels or scores) of the classifier to estimate the class distribution of the test set.
This types of quantifiers can be separated into two main groups: the mixture models and threshold methods, but there are also other methods that do not fit into these categories, such as:</p>
<div class="pst-scrollable-table-container"><table class="table" id="id17">
<caption><span class="caption-text">Other Aggregative Quantifiers</span><a class="headerlink" href="#id17" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>quantifier</p></th>
<th class="head"><p>class</p></th>
<th class="head"><p>reference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Classify and Count</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.CC.html">CC</a></p></td>
<td><p><a class="reference external" href="https://link.springer.com/article/10.1007/s10618-008-0097-y">Forman (2005)</a></p></td>
</tr>
<tr class="row-odd"><td><p>Expectation Maximisation for Quantification</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.EMQ.html">EMQ</a></p></td>
<td><p><a class="reference external" href="https://www.sciencedirect.com/science/article/abs/pii/S0020025512004069?casa_token=W6UksOigmp4AAAAA:ap8FK5mtpAzG-s8k2ygfRVgdIBYDGWjEi70ueJ546coP9F-VNaCKE5W_gsAv0bWQiwzt2QoAuLjP">Saerens et al. (2002)</a></p></td>
</tr>
<tr class="row-even"><td><p>Probabilistic Classify and Count</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.PCC.html">PCC</a></p></td>
<td><p><a class="reference external" href="https://ieeexplore.ieee.org/abstract/document/5694031">Bella et al. (2010)</a></p></td>
</tr>
<tr class="row-odd"><td><p>Friedman Method</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.FM.html">FM</a></p></td>
<td><p><a class="reference external" href="https://jerryfriedman.su.domains/talks/qc.pdf">Friedman</a></p></td>
</tr>
<tr class="row-even"><td><p>Generalized Adjust Count</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.GAC.html">GAC</a></p></td>
<td><p><a class="reference external" href="https://arxiv.org/abs/1606.00868">Firat (2008)</a></p></td>
</tr>
<tr class="row-odd"><td><p>Generalized Probabilistic Adjusted Count</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.GPAC.html">GPAC</a></p></td>
<td><p><a class="reference external" href="https://arxiv.org/abs/1606.00868">Firat (2008)</a></p></td>
</tr>
<tr class="row-even"><td><p>Nearest-Neighbor based Quantification</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.PWK.html">PWK</a></p></td>
<td><p><a class="reference external" href="https://www.sciencedirect.com/science/article/abs/pii/S0031320312003391?casa_token=YUdybEKGhhAAAAAA:HMhq6SBW_-c2FvOZtUE4qB0FRWbp_XnxjtkCBfQZU0aKO325EFP48uLLwfLWBzoSY9T6zdP0kSDk">Barraquero et al. (2013)</a></p></td>
</tr>
</tbody>
</table>
</div>
<p>An important note is that all these listed methods are <strong>multiclass</strong> quantifiers, but the mixture models and threshold methods are <strong>binary</strong> quantifiers.</p>
<section id="classify-count">
<span id="id2"></span><h2><span class="section-number">1.1.1. </span>Classify Count<a class="headerlink" href="#classify-count" title="Link to this heading">#</a></h2>
<p>The most basic quantification method is the Classify and Count (CC) method, which is a simple approach that counts the number of instances of each class in the test set. The CC method is based on the assumption that the class distribution in the test set is similar to that in the training set. The CC method can be used as a baseline for comparison with other quantification methods.
The CC method is implemented in the <a class="reference internal" href="generated/mlquantify.methods.aggregative.CC.html#mlquantify.methods.aggregative.CC" title="mlquantify.methods.aggregative.CC"><code class="xref py py-class docutils literal notranslate"><span class="pre">CC</span></code></a> class.</p>
</section>
<section id="mixture-models">
<span id="id3"></span><h2><span class="section-number">1.1.2. </span>Mixture Models<a class="headerlink" href="#mixture-models" title="Link to this heading">#</a></h2>
<p>Mixture models are binary quantification methods that assume the cumulative distribution of an unknown dataset, or test set, is a mixture of two or more distributions. This concept was first introduced by Forman (<a class="reference external" href="https://link.springer.com/chapter/10.1007/11564096_55">2005</a>, <a class="reference external" href="https://link.springer.com/article/10.1007/s10618-008-0097-y">2008</a>).</p>
<p>The base structure of mixture models uses the scores of the training set generated via cross-validation, and combines them to approximate the distribution of the test set. The quantification process is performed by estimating the parameters of the mixture using the training set scores and then applying the model to the test set scores.</p>
<p>The library implements the following mixture models:</p>
<div class="pst-scrollable-table-container"><table class="table" id="id18">
<caption><span class="caption-text">Implemented Mixture Models</span><a class="headerlink" href="#id18" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>quantifier</p></th>
<th class="head"><p>class</p></th>
<th class="head"><p>reference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Distribution y-Similarity</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.DyS.html">DyS</a></p></td>
<td><p><a class="reference external" href="https://ojs.aaai.org/index.php/AAAI/article/view/4376">Maletzke et al. (2019)</a></p></td>
</tr>
<tr class="row-odd"><td><p>Synthetic Distribution y-Similarity</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.DySsyn.html">DySsyn</a></p></td>
<td><p><a class="reference external" href="https://ieeexplore.ieee.org/abstract/document/9679104">Maletzke et al. (2021)</a></p></td>
</tr>
<tr class="row-even"><td><p>Hellinger Distance Minimization</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.HDy.html">HDy</a></p></td>
<td><p><a class="reference external" href="https://www.sciencedirect.com/science/article/abs/pii/S0020025512004069?casa_token=W6UksOigmp4AAAAA:ap8FK5mtpAzG-s8k2ygfRVgdIBYDGWjEi70ueJ546coP9F-VNaCKE5W_gsAv0bWQiwzt2QoAuLjP">González-Castro et al. (2013)</a></p></td>
</tr>
<tr class="row-odd"><td><p>Sample Mean Matching</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.SMM.html">SMM</a></p></td>
<td><p><a class="reference external" href="https://ieeexplore.ieee.org/document/9260028">Hassan et al. (2013)</a></p></td>
</tr>
<tr class="row-even"><td><p>Sample Ordinal Distance</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.SORD.html">SORD</a></p></td>
<td><p><a class="reference external" href="https://ojs.aaai.org/index.php/AAAI/article/view/4376">Maletzke et al. (2019)</a></p></td>
</tr>
</tbody>
</table>
</div>
<p>Some algorithms such as DyS, Dyssyn and HDy are based on distances between the mixture of the train scores and the test scores. Hdy for example, uses the Hellinger distance to measure the difference between the two distributions. All the distances can be accessed through the <code class="docutils literal notranslate"><span class="pre">mlquantify.utils.method</span></code> module, with 4 different distance functions implemented in the library:</p>
<ul class="simple">
<li><p><a class="reference internal" href="generated/mlquantify.utils.method.sqEuclidean.html#mlquantify.utils.method.sqEuclidean" title="mlquantify.utils.method.sqEuclidean"><code class="xref py py-func docutils literal notranslate"><span class="pre">sqEuclidean</span></code></a>;</p></li>
<li><p><a class="reference internal" href="generated/mlquantify.utils.method.probsymm.html#mlquantify.utils.method.probsymm" title="mlquantify.utils.method.probsymm"><code class="xref py py-func docutils literal notranslate"><span class="pre">probsymm</span></code></a>;</p></li>
<li><p><a class="reference internal" href="generated/mlquantify.utils.method.topsoe.html#mlquantify.utils.method.topsoe" title="mlquantify.utils.method.topsoe"><code class="xref py py-func docutils literal notranslate"><span class="pre">topsoe</span></code></a>;</p></li>
<li><p><a class="reference internal" href="generated/mlquantify.utils.method.hellinger.html#mlquantify.utils.method.hellinger" title="mlquantify.utils.method.hellinger"><code class="xref py py-func docutils literal notranslate"><span class="pre">hellinger</span></code></a>.</p></li>
</ul>
<p>These methods also have the <code class="docutils literal notranslate"><span class="pre">best_distance</span></code> method, which allows you to obtain the best distance computed by the method. Below is an example of how to use this approach:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlquantify.methods</span><span class="w"> </span><span class="kn">import</span> <span class="n">DyS</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">X_train</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">X_test</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="n">quantifier</span> <span class="o">=</span> <span class="n">DyS</span><span class="p">(</span><span class="n">LogisticRegression</span><span class="p">())</span>
<span class="n">quantifier</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">distance</span> <span class="o">=</span> <span class="n">quantifier</span><span class="o">.</span><span class="n">best_distance</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="threshold-methods">
<span id="id7"></span><h2><span class="section-number">1.1.3. </span>Threshold Methods<a class="headerlink" href="#threshold-methods" title="Link to this heading">#</a></h2>
<p>The threshold methods are also binary quantifiers (i.e., multiclass problems have not been implemented yet). Proposed by Forman (<a class="reference external" href="https://link.springer.com/chapter/10.1007/11564096_55">2005</a>, <a class="reference external" href="https://link.springer.com/article/10.1007/s10618-008-0097-y">2008</a>), these algorithms work by adjusting the outputs of a classifier to obtain the class distribution of a test set. Most methods uses a table of thresholds (i.e. 0.0, 0.1, 0.2, …, 1.0) along with the TPR (True Positive Rate) and FPR (False Positive Rate) to estimate the class distribution of the test set. Each different quantifier uses these values in a different way.</p>
<p>The library implements the following threshold methods:</p>
<div class="pst-scrollable-table-container"><table class="table" id="id19">
<caption><span class="caption-text">Implemented Threshold Methods</span><a class="headerlink" href="#id19" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>quantifier</p></th>
<th class="head"><p>class</p></th>
<th class="head"><p>reference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Adjusted Classify and Count or Adjusted Count</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.ACC.html">ACC</a></p></td>
<td><p><a class="reference external" href="https://link.springer.com/article/10.1007/s10618-008-0097-y">Forman (2005)</a></p></td>
</tr>
<tr class="row-odd"><td><p>Threshold MAX</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.MAX.html">MAX</a></p></td>
<td><p><a class="reference external" href="https://link.springer.com/chapter/10.1007/11564096_55">Forman (2008)</a></p></td>
</tr>
<tr class="row-even"><td><p>Median Sweep</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.MS.html">MS</a></p></td>
<td><p><a class="reference external" href="https://link.springer.com/article/10.1007/s10618-008-0097-y">Forman (2005)</a></p></td>
</tr>
<tr class="row-odd"><td><p>Median Sweep 2</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.MS2.html">MS2</a></p></td>
<td><p><a class="reference external" href="https://link.springer.com/article/10.1007/s10618-008-0097-y">Forman (2005)</a></p></td>
</tr>
<tr class="row-even"><td><p>Probabilistic Adjusted Classify and Count</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.PACC.html">PACC</a></p></td>
<td><p><a class="reference external" href="https://ieeexplore.ieee.org/abstract/document/5694031">Bella et al. (2010)</a></p></td>
</tr>
<tr class="row-odd"><td><p>Threshold 50</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.T50.html">T50</a></p></td>
<td><p><a class="reference external" href="https://link.springer.com/article/10.1007/s10618-008-0097-y">Forman (2005)</a></p></td>
</tr>
<tr class="row-even"><td><p>Threshold X</p></td>
<td><p><a class="reference external" href="generated/mlquantify.methods.aggregative.X_method.html">X_method</a></p></td>
<td><p><a class="reference external" href="https://link.springer.com/article/10.1007/s10618-008-0097-y">Forman (2005)</a></p></td>
</tr>
</tbody>
</table>
</div>
<p>You can compute the table of tpr and fpr for each threshold value using the <a class="reference internal" href="generated/mlquantify.utils.method.adjust_threshold.html#mlquantify.utils.method.adjust_threshold" title="mlquantify.utils.method.adjust_threshold"><code class="xref py py-func docutils literal notranslate"><span class="pre">adjust_threshold</span></code></a> function. This function takes as input the true labels and the predicted probabilities of the positive class generated via cross validation, and returns a table with the thresholds, TPR, and FPR values.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlquantify.utils.method</span><span class="w"> </span><span class="kn">import</span> <span class="n">adjust_threshold</span><span class="p">,</span> <span class="n">get_scores</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span> <span class="c1"># Random binary labels [0, 1]</span>
<span class="n">classes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">()</span> <span class="c1"># Example model, replace with your own</span>

<span class="c1"># Fit the model to the data via cross validation</span>
<span class="n">y_labels</span><span class="p">,</span> <span class="n">probabilities</span> <span class="o">=</span> <span class="n">get_scores</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">folds</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">learner_fitted</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">probabilities</span> <span class="o">=</span> <span class="n">probabilities</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="c1"># Get the probabilities for the positive class</span>

<span class="n">thresholds</span><span class="p">,</span> <span class="n">tprs</span><span class="p">,</span> <span class="n">fprs</span> <span class="o">=</span> <span class="n">adjust_threshold</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y_labels</span><span class="p">,</span> <span class="n">probabilities</span><span class="o">=</span><span class="n">probabilities</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="n">classes</span><span class="p">)</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="s2">&quot;Threshold&quot;</span><span class="p">:</span> <span class="n">thresholds</span><span class="p">,</span>
<span class="s2">&quot;TPR&quot;</span><span class="p">:</span> <span class="n">tprs</span><span class="p">,</span>
<span class="s2">&quot;FPR&quot;</span><span class="p">:</span> <span class="n">fprs</span>
<span class="p">})</span>

<span class="nb">print</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</pre></div>
</div>
<p>Or use the <a class="reference internal" href="generated/mlquantify.utils.method.compute_table.html#mlquantify.utils.method.compute_table" title="mlquantify.utils.method.compute_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_table</span></code></a> with the <a class="reference internal" href="generated/mlquantify.utils.method.compute_tpr.html#mlquantify.utils.method.compute_tpr" title="mlquantify.utils.method.compute_tpr"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_tpr</span></code></a> and <a class="reference internal" href="generated/mlquantify.utils.method.compute_fpr.html#mlquantify.utils.method.compute_fpr" title="mlquantify.utils.method.compute_fpr"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_fpr</span></code></a> function to get the TPR and FPR values manually:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlquantify.utils.method</span><span class="w"> </span><span class="kn">import</span> <span class="n">compute_table</span><span class="p">,</span> <span class="n">compute_tpr</span><span class="p">,</span> <span class="n">compute_fpr</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span> <span class="c1"># Random binary labels [0, 1]</span>
<span class="n">classes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">()</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="n">TP</span><span class="p">,</span> <span class="n">FP</span><span class="p">,</span> <span class="n">FN</span><span class="p">,</span> <span class="n">TN</span> <span class="o">=</span> <span class="n">compute_table</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">classes</span><span class="p">)</span>
<span class="n">tpr</span> <span class="o">=</span> <span class="n">compute_tpr</span><span class="p">(</span><span class="n">TP</span><span class="p">,</span> <span class="n">FN</span><span class="p">)</span>
<span class="n">fpr</span> <span class="o">=</span> <span class="n">compute_fpr</span><span class="p">(</span><span class="n">FP</span><span class="p">,</span> <span class="n">TN</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;True Positive Rate (TPR):&quot;</span><span class="p">,</span> <span class="n">tpr</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;False Positive Rate (FPR):&quot;</span><span class="p">,</span> <span class="n">fpr</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="expectation-maximisation-for-quantification">
<span id="id16"></span><h2><span class="section-number">1.1.4. </span>Expectation Maximisation for Quantification<a class="headerlink" href="#expectation-maximisation-for-quantification" title="Link to this heading">#</a></h2>
<p>The Expectation Maximisation (EM) is an iterative algorithm that is used to find the maximum likelihood estimates of parameters (our case is the class distribution)for models that depend on unobserved latent variables. The algorithm consists by incrementally updating the posterior probabiblites by using the class prevalence values computed in the last step of the iteration, and updates the class prevalence values by using the posterior probabilities computed in the last step of the iteration, in a mutually recursive fashion.</p>
<p>The method is available in <a class="reference internal" href="generated/mlquantify.methods.aggregative.EMQ.html#mlquantify.methods.aggregative.EMQ" title="mlquantify.methods.aggregative.EMQ"><code class="xref py py-class docutils literal notranslate"><span class="pre">EMQ</span></code></a> class, and can be used as a probabilistic classifier, using the <a class="reference internal" href="generated/mlquantify.methods.aggregative.EMQ.html#mlquantify.methods.aggregative.EMQ.predict_proba" title="mlquantify.methods.aggregative.EMQ.predict_proba"><code class="xref py py-func docutils literal notranslate"><span class="pre">predict_proba</span></code></a> method, or as a quantifier, example below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlquantify.methods.aggregative</span><span class="w"> </span><span class="kn">import</span> <span class="n">EMQ</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">X_train</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">X_test</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="n">quantifier</span> <span class="o">=</span> <span class="n">EMQ</span><span class="p">(</span><span class="n">LogisticRegression</span><span class="p">())</span>
<span class="n">quantifier</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="n">class_distribution</span> <span class="o">=</span> <span class="n">quantifier</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">scores</span> <span class="o">=</span> <span class="n">quantifier</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Class distribution:&quot;</span><span class="p">,</span> <span class="n">class_distribution</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Scores:&quot;</span><span class="p">,</span> <span class="n">scores</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  <div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item">
<div class="prev-next-area">
    <a class="left-prev"
       href="../methods_taxonomy.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">1. </span>Methods Taxonomy</p>
      </div>
    </a>
    <a class="right-next"
       href="non_aggregative.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">1.2. </span>Non Aggregative Quantification</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>
                </footer>
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#classify-count">1.1.1. Classify Count</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mixture-models">1.1.2. Mixture Models</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#threshold-methods">1.1.3. Threshold Methods</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#expectation-maximisation-for-quantification">1.1.4. Expectation Maximisation for Quantification</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/modules/aggregative.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>